<div class="container">
  <!-- JOIN SCREEN -->
  <div *ngIf="!joinedRoom" class="join-screen">
    <h1>Car Controller</h1>
    <div class="input-group">
      <input [(ngModel)]="roomCodeInput" placeholder="ENTER CODE" maxlength="6" (keyup.enter)="joinRoom()"
        class="code-input" />
      <button (click)="joinRoom()" class="btn-primary">JOIN</button>
    </div>
    <div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
  </div>

  <!-- GAMEPAD SCREEN -->
  <div *ngIf="joinedRoom" class="gamepad-screen">
    <div class="header">
      <span>ROOM: {{ joinedRoom }}</span>
    </div>

    <!-- GAME OVER -->
    <div *ngIf="isGameOver" class="game-over-screen">
      <h2>GAME OVER</h2>
      <button (click)="restartGame()" class="btn-primary">RESTART GAME</button>
    </div>

    <!-- CONTROLS -->
    <div *ngIf="!isGameOver" class="controls-container">
      <div *ngIf="!permissionGranted" class="permission-request">
        <p>Tap below to enable steering control</p>
        <button (click)="requestPermission()" class="btn-primary">ENABLE GYRO</button>
        <p class="hint">(Or use buttons below if no gyro)</p>
      </div>

      <div class="controls">
        <button (touchstart)="steerLeft()" (touchend)="releaseSteer()" (mousedown)="steerLeft()"
          (mouseup)="releaseSteer()" [class.active]="isSteering === 'LEFT'" class="steer-btn left">
          ◀
        </button>

        <div class="status-indicator">
          <div [class.active]="isSteering === 'CENTER'" class="center-light"></div>
        </div>

        <button (touchstart)="steerRight()" (touchend)="releaseSteer()" (mousedown)="steerRight()"
          (mouseup)="releaseSteer()" [class.active]="isSteering === 'RIGHT'" class="steer-btn right">
          ▶
        </button>
      </div>
    </div>
  </div>
</div>