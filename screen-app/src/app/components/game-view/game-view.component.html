<div class="game-container" [class.shaking]="gameOver">
  <!-- MULTIPLAYER HUD -->
  <div class="hud" *ngIf="!gameOver && players.length > 0">
    <div class="player-hud p1">
      <div class="score">P1: {{ players[0]?.score }}</div>
    </div>

    <div class="center-hud">
      <div class="timer">{{ remainingTime }}</div>
    </div>

    <div class="player-hud p2" *ngIf="players.length > 1">
      <div class="score">P2: {{ players[1]?.score }}</div>
    </div>
  </div>

  <!-- ROAD -->
  <div class="road">
    <div class="road-lines" [style.transform]="'translateY(' + roadOffset + 'px)'"></div>

    <!-- STARS (STARS) -->
    <div *ngFor="let obs of obstacles" class="obstacle" [style.left.%]="obs.x" [style.top.%]="obs.y"
      [style.width.%]="obs.width" [style.height.%]="obs.height">
      ‚≠ê
    </div>

    <!-- CARS -->
    <div *ngFor="let p of players" class="car p{{ p.index + 1 }}" [class.crashed]="p.crashed"
      [style.left.%]="p.carPosition" [style.bottom.%]="p.displayY"
      [style.transform]="'translateX(-50%) rotate(' + getCarRotation(p) + 'deg)'">
      <div class="car-body">
        <div class="lights"></div>
        <div class="roof"></div>
        <div class="player-label">P{{ p.index + 1 }}</div>
      </div>
      <div class="shadow"></div>

      <!-- EXPLOSION (Per car) -->
      <div *ngIf="p.crashed" class="explosion"></div>
    </div>
  </div>

  <!-- GAME OVER OVERLAY (Multiplayer) -->
  <div *ngIf="gameOver" class="game-over">
    <div class="icon">{{ winner === 'DRAW' ? 'ü§ù' : 'üèÜ' }}</div>
    <h1 *ngIf="winner === 'DRAW'">IT'S A DRAW!</h1>
    <h1 *ngIf="winner !== 'DRAW'">PLAYER {{ winner === 0 ? '1' : '2' }} WINS!</h1>

    <div class="stats">
      <div class="stat-item" *ngFor="let p of players">
        <span class="stat-label">P{{ p.index + 1 }} POINTS</span>
        <span class="stat-value">{{ p.score }}</span>
      </div>
    </div>

    <div class="restart-info">
      <p>GET READY FOR NEXT ROUND...</p>
      <div class="restart-bar">
        <div class="restart-progress"></div>
      </div>
    </div>
  </div>
</div>